:root{--bg:#f8f6fb;--card:#fff;--accent:#7b61ff;--muted:#666}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:linear-gradient(180deg,#faf8ff 0%, #f0f7ff 100%); color:#222}
.wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:40px}
.game{width:920px;max-width:96%;background:var(--card);border-radius:16px;box-shadow:0 8px 30px rgba(45,55,80,0.08);padding:28px;text-align:center;position:relative}

/* Header: title + scoreboard */
.header{display:flex;align-items:center;justify-content:space-between;gap:12px}
h1{margin:0;font-size:28px}
/* Scoreboard with rainbow border */
.scoreboard{padding:8px 12px;border-radius:10px;border:3px solid transparent;border-image:linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);border-image-slice:1;animation:rainbow-glow 4s linear infinite;font-weight:700}
@keyframes rainbow-glow{0%{filter:hue-rotate(0deg)}50%{filter:hue-rotate(180deg)}100%{filter:hue-rotate(360deg)}}

/* Level & Golden Beans display top-left */
.level-display{position:fixed;left:16px;top:16px;background:rgba(255,255,255,0.95);padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-weight:900;z-index:1300;text-shadow:1px 1px 2px rgba(0,0,0,0.15);display:flex;gap:10px;align-items:center}
.golden-counter{display:flex;align-items:center;gap:6px;font-weight:900;text-shadow:1px 1px 2px rgba(0,0,0,0.5)}
.golden-counter img{width:24px;height:24px}

/* Pusheen target and click effect */
.pusheen-target{display:inline-block;cursor:pointer;user-select:none;margin:14px auto;padding:6px;border-radius:12px;transition:box-shadow .08s;box-shadow:0 6px 18px rgba(123,97,255,0.12);background:linear-gradient(180deg, rgba(255,255,255,0.65), rgba(250,250,255,0.85));}
.pusheen-target:active{transform:none}
img#pusheenImg{width:260px;height:260px;object-fit:contain;border-radius:12px;display:block;transition:transform .12s ease}
img#pusheenImg.clicked{transform:scale(0.95)}
/* placeholder SVG if image fails */
.img-fallback{width:260px;height:260px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px;border:1px dashed #ddd;color:#999;font-weight:700}

/* Zzz text above Pusheen during nap */
.zzz{position:absolute;left:50%;transform:translateX(-50%);top:110px;font-weight:700;color:#444;font-size:20px;display:none;pointer-events:none}

/* Event banners container */
.event-banners{position:fixed;left:50%;transform:translateX(-50%);top:12px;display:flex;flex-direction:column;gap:8px;z-index:1200}
.event-banner{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.95);box-shadow:0 8px 30px rgba(0,0,0,0.12);font-weight:800}
.event-banner.sugar{color:#b37400;border:2px solid rgba(183,116,0,0.12)}
.event-banner.nap{color:#333;border:2px solid rgba(0,0,0,0.06)}
.event-banner.heat{color:#b34a00;border:2px solid rgba(179,74,0,0.12)}

/* sugar background animation */
@keyframes shiny {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
body.sugar-rush{background:linear-gradient(90deg,#fff7e6 0%, #fff0b8 25%, #fff7e6 50%, #fff0b8 75%, #fff7e6 100%);background-size:200% 200%;animation:shiny 3s linear infinite}
body.nap-mode{filter:grayscale(100%)}
/* heat overlay */
#heatOverlay{position:fixed;inset:0;pointer-events:none;background:rgba(255,120,0,0.0);transition:background .3s;z-index:1150}
body.heat-wave #heatOverlay{background:rgba(255,120,0,0.15);animation:heatWave 1.8s linear infinite}
@keyframes heatWave{0%{filter:blur(0px)}50%{filter:blur(1px) hue-rotate(2deg)}100%{filter:blur(0px)}}

.stats{display:flex;gap:12px;justify-content:center;margin-top:16px;flex-wrap:wrap}
.stat{background:#fbfbff;border:1px solid rgba(0,0,0,0.03);padding:10px 14px;border-radius:10px;min-width:170px}
.stat b{display:block;font-size:14px}
.desc{color:var(--muted);font-size:13px;margin-bottom:8px}
.upgrades{margin-top:20px;text-align:left}
.upgrade{display:flex;align-items:center;justify-content:space-between;background:#fff;border-radius:10px;padding:10px 12px;border:1px solid rgba(0,0,0,0.04);margin-bottom:10px}
.upgrade.locked{filter:grayscale(100%);pointer-events:none;opacity:0.5}
.upgrade.unaffordable{opacity:0.75;filter:none}
.upgrade.affordable{box-shadow:0 8px 18px rgba(123,97,255,0.12);border:1px solid rgba(123,97,255,0.12)}
button.buy{background:linear-gradient(90deg,var(--accent),#5c3cff);color:#fff;border:0;padding:10px 12px;border-radius:8px;cursor:pointer;font-weight:600}
button.buy:disabled{opacity:.45;cursor:not-allowed}
.upgrade-left{max-width:62%}
.small{font-size:13px;color:var(--muted)}
footer{margin-top:12px;font-size:12px;color:var(--muted)}

/* Mafia warning and modal */
#mafiaWarning{position:fixed;right:18px;top:18px;background:rgba(255,255,255,0.98);padding:10px 12px;border-radius:8px;border:2px solid rgba(200,40,40,0.12);z-index:900;display:none;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
#mafiaWarning strong{color:#c62828;font-weight:700}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:1000}
.modal{background:#fff;padding:20px;border-radius:12px;max-width:480px;width:92%;box-shadow:0 12px 40px rgba(0,0,0,0.25);text-align:center}
.modal h2{margin:0 0 8px}
.modal p{margin:8px 0}
.modal .bribe{font-weight:700;margin:6px 0}
.modal button{margin:8px 6px;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}

/* styled pay button */
.btn-pay{background:linear-gradient(90deg,#00c853,#00e676);color:#063;box-shadow:0 6px 18px rgba(0,200,83,0.12);font-weight:800;padding:10px 14px}
.btn-play{background:linear-gradient(90deg,var(--accent),#5c3cff);color:#fff;padding:10px 14px}

/* mafia banner image inside modal */
.mafia-banner-img{width:100%;max-height:120px;object-fit:contain;border-radius:8px;margin-bottom:8px;display:none}

/* Game over banner */
.gameover-banner{width:100%;max-height:140px;object-fit:contain;border-radius:8px;margin-bottom:8px;display:none}

/* Hydration UI (bottom-right) */
.hydration{position:fixed;right:16px;bottom:16px;width:140px;height:120px;background:rgba(255,255,255,0.95);border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.12);display:flex;align-items:center;gap:8px;padding:8px;z-index:1100}
.hydration img{width:100px;height:100px;object-fit:cover;border-radius:8px;cursor:pointer}
.water-bar{width:16px;height:100px;background:#e6f4ff;border:4px solid #9ed1ff;border-radius:8px;position:relative;overflow:hidden}
.water-fill{position:absolute;left:0;bottom:0;width:100%;height:100%;background:linear-gradient(180deg,#66c2ff,#1e90ff);transition:height 120ms linear}
.water-low{border-color:#ff5252;box-shadow:0 0 12px rgba(255,82,82,0.5);animation:lowPulse 1s infinite}
@keyframes lowPulse{0%{box-shadow:0 0 6px rgba(255,82,82,0.25)}50%{box-shadow:0 0 14px rgba(255,82,82,0.45)}100%{box-shadow:0 0 6px rgba(255,82,82,0.25)}}

/* Ultimate Snack buff rainbow text */
.rainbow-text{background:linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);background-clip:text;-webkit-background-clip:text;color:transparent;animation:rainbow-glow 1.2s linear infinite}

/* Golden bean floating */
.golden-bean{position:fixed;width:48px;height:48px;z-index:1300;cursor:pointer;pointer-events:auto}

/* Achievements button bottom-left */
.achv-btn{position:fixed;left:16px;bottom:16px;width:64px;height:64px;padding:6px;background:rgba(255,255,255,0.95);border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.12);z-index:1300;cursor:pointer}
.achv-btn img{width:100%;height:100%;object-fit:contain}

/* Achievements modal */
.achv-list{display:flex;flex-direction:column;gap:8px;max-height:60vh;overflow:auto;text-align:left}
.achv-item{padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:#fff;display:flex;justify-content:space-between;align-items:center}
.claim-btn{background:#ffd166;border-radius:8px;padding:8px 10px;border:0;font-weight:700;cursor:pointer}
.claim-btn.claimed{background:#bdbdbd;color:#fff;cursor:default}

/* Lottery */
.lottery{margin-top:18px;padding:12px;border-radius:12px;background:#fbfbff;border:1px solid rgba(0,0,0,0.04)}
.spinner{height:56px;display:flex;align-items:center;justify-content:center;gap:18px}
.spinner .slot{width:120px;height:48px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center;font-weight:700}

/* Game over overlay */
#gameOverOverlay .modal{max-width:520px}

@media (max-width:420px){.stats{flex-direction:column;align-items:center}.stat{min-width:unset;width:100%}.hydration{width:120px}}